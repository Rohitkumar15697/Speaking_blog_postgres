{%extends 'base.html' %}

    {%block head%} 
        <meta name='description' content="{{data.post | truncatechars:150}} | speaksera">
     {%endblock%}
    {%block title%} {{data.title}} | speaksera {%endblock%}

    {%block style%}
       
        .postdata{text-align:justify; 
            justify-content:space-between;
                    }

        .postdata h1{color:rgb(115, 132, 167)}

      /**This is the front of comment user image like circle**/
       .dot{        
                border-radius:50%;
                font-size:25px;
                color:rgb(255, 250, 250);
                background:rgb(199, 199, 199);}

        .btn-sm{font-size:12px;}
    {%endblock%}

    


{%block body%}




    <div class='container-fluid bg-light'>
        <div class='row'>
        

        <div class='col-md-9 postdata'>
            <h1>{{data.title}} | speaksera</h1>
            <small class='text-muted'><b>Author</b>- {{data.created_by}}</small><br>
            
            <small class='text-muted'l><b>Posted on: </b>- {{data.date}}</small> <br>

            <!--Printing date of created-->
            <small class='text-muted'><u><b>Category: </b>{{data.topic}}</u></small>

            
                
                <div>   
                <p class='fs-5 fw-light'>{{data.post|safe | linebreaks}}</p>
                </div> 

                <hr><br>
                <!--Blog Like section-->
                
                {%if user.is_authenticated%}        
                                <form method='post' action="{%url 'homeapp:like_post' data.slug %}" class='form-group'>
                                                            
                                    {%csrf_token%}

                                    {%if user in data.likes.all%}
                                        <small>{{data.likes.count}} Likes</small> <button type='submit' name='like' value="{{data.slug}}" class='btn btn-danger  btn-sm'>Unlike</button>
                                    {%else%}
                                        <small>{{data.likes.count}} Likes</small> <button type='submit' name='like' value="{{data.slug}}" class='btn btn-primary btn-sm'>Like</button>
                                    {%endif%}

                                </form>
                    {%else%}
                        <small>{{data.likes.count}} Likes</small>
                        
                                
                {%endif%}  

            <br>    


                <!--This is for delete and edit post in blogpost_detail page only-->

                
                {% if user.is_authenticated %}
                    {%if user.id == data.created_by.id %}

                                <a href={%url 'homeapp:editblog' data.slug %}>Edit</a>&nbsp;&nbsp;&nbsp;

                                <a href={%url 'homeapp:deleteblog' data.slug%} class='text-danger'>Delete</a>

                    {%endif%}
                {%endif%}<br><br><hr>

        </div>


        
        <div class='col-md-3'>
            
            <strong>See also</strong><br><br>
            {%for titles in list_titles%}
                <a href={%url 'homeapp:article' titles.slug%}>{{titles.title | truncatechars:50}}</a><br><br>
            {%endfor%}
        
            <u><a  href={%url 'homeapp:listdata' %} class='text-info'>See all</a></u>
            
        </div>

        </div>
    </div>





        <br><br>    

        <!--Comments Section-->
        <hr>
        <div class='container'>
            <h2>Comments...</h2><br>



                {%if user.is_authenticated%}
                            <div class='col-md-6'>
                                <form method='post' action="{%url 'homeapp:article' data.slug %}/comment">
                                    {%csrf_token%}
                                    <div class='form-group'>
                                        
                                        <input type='text' name='comment_text' class='form-control' placeholder='comment...'>
                                        <input type='submit' name='comment_button' value='Post' class='btn btn-primary btn-sm mt-2'>
                                    </div>
                                </form>
                            </div>
                        
                {%endif%}

                <div class='col-md-6'>
                <!--showing comment on page-->
                {%if not data.comments.all %}
                    <!--if there is no comments-->
                    No comments yet...

                    {%else%}
                        <!--if there is already some comments-->
                        <strong>Total Comments</strong> - {{data.comments.count}} <br>
                        
                        <br>

                        <!--print all comments to template-->
                        {%for comment in data.comments.all %}
                        <div class='comment_section my-4'>
                            <span class='dot mx-3 pb-2 p-1'> &nbsp; {{ comment.name|make_list|first|title }}&nbsp; </span>    
                            <strong class='text-info '>{{comment.name}}</strong> -
                                <span class='text-muted'>{{comment.date_added}}</span><br>
                            <p style="margin-left:80px;">{{comment.body}}</p>
                        </div>
                            
<hr>
                        {%endfor%}
                        
                {%endif%}
                </div>
        </div>
        
            

    </div>


    
<br>
{%endblock%}





